<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rent Payment Infographic</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F9FA;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .kpi-card, .info-card {
            background-color: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: transform 0.2s;
        }
        .kpi-card {
             text-align: center;
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -31px;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: #118AB2;
            border: 4px solid #F8F9FA;
            transition: background-color 0.3s;
        }
        .timeline-item.paid::before {
            background-color: #06D6A0;
        }
        .admin-controls {
            display: none;
        }
        body.admin-mode .admin-controls {
            display: block;
        }
        .paid .payment-details-text {
            text-decoration: line-through;
            color: #6c757d;
        }
        #suggestionModal.hidden {
            display: none;
        }
    </style>
</head>
<body class="text-[#073B4C]">

    <div class="container mx-auto p-4 md:p-8 max-w-7xl">

        <header class="text-center mb-12">
            <div class="flex justify-center items-center gap-4 mb-4">
                 <button id="adminBtn" class="bg-[#073B4C] text-white font-semibold py-2 px-4 rounded-lg hover:bg-[#118AB2] transition-colors">
                    Enter Admin Mode
                </button>
            </div>
            <h1 class="text-4xl md:text-5xl font-bold text-[#073B4C] mb-2">Household Dashboard</h1>
            <p class="text-lg text-[#118AB2]">For Sheetal Khadka & Axeta Nirola</p>
        </header>

        <main class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-8">
            <div class="kpi-card">
                <h3 class="text-lg font-semibold text-gray-500 mb-2">Fortnightly Rent</h3>
                <p class="text-5xl font-extrabold text-[#06D6A0]">$520</p>
            </div>
            <div id="next-due-kpi" class="kpi-card">
                <h3 class="text-lg font-semibold text-gray-500 mb-2">Next Payment Due</h3>
                <p class="text-4xl font-bold text-[#FF6B6B]">Aug 10, 2025</p>
            </div>
            <div id="total-paid-kpi" class="kpi-card">
                <h3 class="text-lg font-semibold text-gray-500 mb-2">Total Paid</h3>
                <p class="text-5xl font-extrabold text-[#118AB2]">$0</p>
            </div>
            <div class="kpi-card">
                <h3 class="text-lg font-semibold text-gray-500 mb-2">Total Rent in Period</h3>
                <p class="text-5xl font-extrabold text-gray-700">$7,280</p>
            </div>
        </main>

        <section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-8">
            <div id="upcoming-bill-card" class="info-card"></div>
            <div id="chores-card" class="info-card lg:col-span-2 md:col-span-2"></div>
            <div class="info-card lg:col-span-3 md:col-span-2">
                <h2 class="text-2xl font-bold mb-4">ðŸ“ž Key House Info</h2>
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-6 text-gray-700 items-center">
                    <div>
                        <h3 class="font-semibold text-gray-900">Address:</h3>
                        <p>4/305 Wharf Street, Queens Park, 6107</p>
                    </div>
                    <div>
                        <h3 class="font-semibold text-gray-900">Lease Owner / Contact:</h3>
                        <p>Nimesh Gautam</p>
                        <p>0450 223 264</p>
                    </div>
                     <div>
                        <a href="mailto:nimeshgautam46@gmail.com" class="inline-block w-full bg-blue-500 text-white font-bold py-2 px-4 rounded-lg text-center hover:bg-blue-600 transition-colors">
                            Email Lease Owner
                        </a>
                    </div>
                </div>
            </div>
        </section>
        
        <section class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            
            <div class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-2xl font-bold mb-1">Monthly Rent Breakdown</h2>
                <p class="text-gray-600 mb-6">This chart shows the total rent for each month. Green bars indicate the month is fully paid, while red indicates a payment is still due.</p>
                <div class="chart-container h-[350px] md:h-96 max-h-[450px]">
                    <canvas id="monthlyRentChart"></canvas>
                </div>
            </div>

            <div class="space-y-8">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-2xl font-bold">ðŸ”” Notifications</h2>
                        <div class="admin-controls">
                            <button id="add-notification-btn" class="bg-blue-500 text-white text-sm font-semibold py-1 px-3 rounded-lg hover:bg-blue-600">+ Add</button>
                        </div>
                    </div>
                    <div id="notification-list" class="space-y-4 max-h-48 overflow-y-auto pr-2"></div>
                </div>

                <div class="bg-white rounded-lg shadow-md p-6 flex flex-col">
                    <h2 class="text-2xl font-bold mb-6">Shared Utility Bills</h2>
                    <p class="text-gray-600 mb-6">Utility costs for electricity, water, and internet are shared equally. All bills are stored in a shared folder, which you can access by clicking the button below.</p>
                    <div class="mt-auto">
                        <a href="https://drive.google.com/drive/folders/1ZoBCqcSDX-zJlcwzJYdnqlKzr13EvTfb?usp=sharing" target="_blank" rel="noopener noreferrer" class="block w-full bg-yellow-400 text-yellow-900 font-bold py-3 px-4 rounded-lg text-center hover:bg-yellow-500 transition-colors">
                            Open Utility Bills Folder
                        </a>
                    </div>
                </div>
            </div>

        </section>

        <section class="mt-8 bg-white rounded-lg shadow-md p-6">
            <h2 class="text-2xl font-bold text-center mb-8">Fortnightly Payment Timeline</h2>
            <div id="payment-timeline" class="relative pl-8 border-l-2 border-dashed border-[#118AB2]">
            </div>
        </section>
        
        <footer class="text-center mt-12">
            <p class="text-xs text-gray-500">
                This dashboard is an informal overview to help keep up with dates and payments. It does not act as a tax document and is not for government purposes.
            </p>
        </footer>

    </div>

    <!-- Suggestion Modal -->
    <div id="suggestionModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center">
        <div class="relative mx-auto p-5 border w-full max-w-lg shadow-lg rounded-md bg-white">
            <div class="mt-3 text-center">
                <h3 class="text-lg leading-6 font-medium text-gray-900">ðŸŽ² Random Chore Suggestion</h3>
                <div id="suggestion-content" class="mt-2 px-7 py-3 max-h-96 overflow-y-auto">
                    <p>Generating suggestions...</p>
                </div>
                <div class="items-center px-4 py-3">
                    <button id="apply-suggestion-btn" class="hidden px-4 py-2 bg-green-500 text-white text-base font-medium rounded-md w-auto shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-300">
                        Apply This Week's Chores
                    </button>
                    <button id="close-suggestion-btn" class="px-4 py-2 bg-gray-500 text-white text-base font-medium rounded-md w-auto shadow-sm hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-300">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            const initialPayments = [
                { id: 0, month: 'July 2025', dueDate: 'Jul 27, 2025', amount: 520, status: 'paid' },
                { id: 1, month: 'August 2025', dueDate: 'Aug 10, 2025', amount: 520, status: 'due' },
                { id: 2, month: 'August 2025', dueDate: 'Aug 24, 2025', amount: 520, status: 'due' },
                { id: 3, month: 'September 2025', dueDate: 'Sep 7, 2025', amount: 520, status: 'due' },
                { id: 4, month: 'September 2025', dueDate: 'Sep 21, 2025', amount: 520, status: 'due' },
                { id: 5, month: 'October 2025', dueDate: 'Oct 5, 2025', amount: 520, status: 'due' },
                { id: 6, month: 'October 2025', dueDate: 'Oct 19, 2025', amount: 520, status: 'due' },
                { id: 7, month: 'November 2025', dueDate: 'Nov 2, 2025', amount: 520, status: 'due' },
                { id: 8, month: 'November 2025', dueDate: 'Nov 16, 2025', amount: 520, status: 'due' },
                { id: 9, month: 'November 2025', dueDate: 'Nov 30, 2025', amount: 520, status: 'due' },
                { id: 10, month: 'December 2025', dueDate: 'Dec 14, 2025', amount: 520, status: 'due' },
                { id: 11, month: 'December 2025', dueDate: 'Dec 28, 2025', amount: 520, status: 'due' },
                { id: 12, month: 'January 2026', dueDate: 'Jan 11, 2026', amount: 520, status: 'due' },
                { id: 13, month: 'January 2026', dueDate: 'Jan 25, 2026', amount: 520, status: 'due' },
            ];

            const choreOptions = ['Kitchen', 'Bins', 'Bathroom', 'Vacuum', 'Green bin drop (Mon)', 'Yellow bin drop (Fortnightly)'];

            let payments = [];
            let notifications = [];
            let upcomingBill = {};
            let chores = [];
            let monthlyRentChart;
            let choreSuggestion = null;

            const adminBtn = document.getElementById('adminBtn');
            const timelineContainer = document.getElementById('payment-timeline');
            const notificationList = document.getElementById('notification-list');
            const addNotificationBtn = document.getElementById('add-notification-btn');
            const upcomingBillCard = document.getElementById('upcoming-bill-card');
            const choresCard = document.getElementById('chores-card');
            const suggestionModal = document.getElementById('suggestionModal');
            const suggestionContent = document.getElementById('suggestion-content');
            const applySuggestionBtn = document.getElementById('apply-suggestion-btn');
            const closeSuggestionBtn = document.getElementById('close-suggestion-btn');
            const correctPassword = '@Nimace46';

            function saveData() {
                localStorage.setItem('rentPaymentsData', JSON.stringify(payments));
                localStorage.setItem('rentNotificationsData', JSON.stringify(notifications));
                localStorage.setItem('rentUpcomingBill', JSON.stringify(upcomingBill));
                localStorage.setItem('rentChores', JSON.stringify(chores));
            }

            function loadData() {
                const savedPayments = localStorage.getItem('rentPaymentsData');
                payments = savedPayments ? JSON.parse(savedPayments) : JSON.parse(JSON.stringify(initialPayments));
                
                const savedNotifications = localStorage.getItem('rentNotificationsData');
                notifications = savedNotifications ? JSON.parse(savedNotifications) : [];

                const savedBill = localStorage.getItem('rentUpcomingBill');
                upcomingBill = savedBill ? JSON.parse(savedBill) : { type: 'None', total: '0', share: '0', due: 'N/A' };

                const savedChores = localStorage.getItem('rentChores');
                chores = savedChores ? JSON.parse(savedChores) : [
                    { name: 'Nimesh', task: 'Kitchen', dueDate: 'Aug 4, 2025' },
                    { name: 'Sabina', task: 'Bathroom', dueDate: 'Aug 4, 2025' },
                    { name: 'Sheetal', task: 'Vacuum', dueDate: 'Aug 4, 2025' },
                    { name: 'Axeta', task: 'Bins', dueDate: 'Aug 4, 2025' }
                ];
            }
            
            function markAsPaid(id) {
                const payment = payments.find(p => p.id === id);
                if (payment) {
                    payment.status = 'paid';
                    saveData();
                    render();
                }
            }
            
            function addNotification() {
                const text = prompt("Enter notification message:");
                if (text) {
                    notifications.unshift({
                        id: Date.now(),
                        text: text,
                        timestamp: new Date().toLocaleString('en-US', { month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' })
                    });
                    saveData();
                    render();
                }
            }

            function deleteNotification(id) {
                notifications = notifications.filter(n => n.id !== id);
                saveData();
                render();
            }

            function editUpcomingBill() {
                const type = prompt("Enter bill type (e.g., Electricity):", upcomingBill.type);
                const total = prompt("Enter total amount:", upcomingBill.total);
                const share = prompt("Enter each person's share:", upcomingBill.share);
                const due = prompt("Enter due date:", upcomingBill.due);
                if (type !== null && total !== null && share !== null && due !== null) {
                    upcomingBill = { type, total, share, due };
                    saveData();
                    render();
                }
            }

            function suggestChoreRotation() {
                suggestionModal.classList.remove('hidden');
                suggestionContent.innerHTML = `<p>ðŸŽ² Generating a random weekly assignment...</p>`;
                applySuggestionBtn.classList.remove('hidden');

                // Simple shuffle algorithm
                const shuffledChores = [...choreOptions].sort(() => 0.5 - Math.random());
                
                const newSuggestion = {};
                chores.forEach((person, index) => {
                    newSuggestion[person.name] = shuffledChores[index];
                });
                
                choreSuggestion = newSuggestion;

                let suggestionHtml = `<h4 class="text-md font-semibold mt-4 mb-2 text-left">Suggested Week:</h4>`;
                suggestionHtml += '<ul class="list-disc list-inside text-left">';
                for (const person in choreSuggestion) {
                    suggestionHtml += `<li><strong>${person}:</strong> ${choreSuggestion[person]}</li>`;
                }
                suggestionHtml += '</ul>';
                
                suggestionContent.innerHTML = suggestionHtml;
            }

            function applySuggestion() {
                if (choreSuggestion) {
                    let currentDate = new Date();
                    currentDate.setDate(currentDate.getDate() + 7); // Set due date to next week
                    const dueDateStr = currentDate.toLocaleString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });

                    const newChores = chores.map(person => ({
                        name: person.name,
                        task: choreSuggestion[person.name] || 'Not assigned',
                        dueDate: dueDateStr
                    }));

                    chores = newChores;
                    saveData();
                    render();
                    suggestionModal.classList.add('hidden');
                }
            }


            function renderKPIs() {
                const totalPaid = payments.filter(p => p.status === 'paid').reduce((sum, p) => sum + p.amount, 0);
                document.querySelector('#total-paid-kpi p').textContent = `$${totalPaid.toLocaleString()}`;

                const nextDuePayment = payments.find(p => p.status === 'due');
                const nextDueEl = document.querySelector('#next-due-kpi p');
                if (nextDuePayment) {
                    nextDueEl.textContent = nextDuePayment.dueDate;
                    nextDueEl.classList.remove('text-green-500');
                    nextDueEl.classList.add('text-[#FF6B6B]');
                } else {
                    nextDueEl.textContent = 'All Paid!';
                    nextDueEl.classList.remove('text-[#FF6B6B]');
                    nextDueEl.classList.add('text-green-500');
                }
            }
            
            function renderTimeline() {
                timelineContainer.innerHTML = '';
                const paymentsByMonth = payments.reduce((acc, p) => {
                    if (!acc[p.month]) {
                        acc[p.month] = [];
                    }
                    acc[p.month].push(p);
                    return acc;
                }, {});

                for (const month in paymentsByMonth) {
                    const monthPayments = paymentsByMonth[month];
                    const allInMonthPaid = monthPayments.every(p => p.status === 'paid');
                    
                    const monthDiv = document.createElement('div');
                    monthDiv.className = `mb-8 relative timeline-item ${allInMonthPaid ? 'paid' : ''}`;
                    
                    let paymentDetailsHtml = monthPayments.map(p => `
                        <div class="flex justify-between items-center ${p.status === 'paid' ? 'payment-details-text' : ''}">
                            <span>Due: ${p.dueDate}</span>
                            <div class="admin-controls">
                                ${p.status === 'due' ? `<button data-id="${p.id}" class="mark-paid-btn bg-green-500 text-white px-3 py-1 rounded-lg text-sm hover:bg-green-600">Mark Paid</button>` : '<span class="text-green-600 font-semibold">PAID</span>'}
                            </div>
                        </div>
                    `).join('');

                    monthDiv.innerHTML = `
                        <h4 class="font-bold text-lg text-[#073B4C]">${month}</h4>
                        <div class="text-sm text-gray-600 space-y-2 mt-2">${paymentDetailsHtml}</div>
                    `;
                    timelineContainer.appendChild(monthDiv);
                }
                
                document.querySelectorAll('.mark-paid-btn').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const id = parseInt(e.target.dataset.id);
                        markAsPaid(id);
                    });
                });
            }

            function renderNotifications() {
                notificationList.innerHTML = '';
                if (notifications.length === 0) {
                    notificationList.innerHTML = `<p class="text-gray-500 text-center">No new notifications.</p>`;
                    return;
                }
                
                notifications.forEach(n => {
                    const item = document.createElement('div');
                    item.className = 'flex items-start p-2 bg-gray-50 rounded-lg';
                    item.innerHTML = `
                        <div class="text-xl mr-3 mt-1">ðŸ’¬</div>
                        <div class="flex-grow">
                            <p>${n.text}</p>
                            <p class="text-xs text-gray-400">${n.timestamp}</p>
                        </div>
                        <div class="admin-controls">
                            <button data-id="${n.id}" class="delete-notification-btn text-red-500 hover:text-red-700 font-bold ml-2">&times;</button>
                        </div>
                    `;
                    notificationList.appendChild(item);
                });

                document.querySelectorAll('.delete-notification-btn').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const id = parseInt(e.target.dataset.id);
                        deleteNotification(id);
                    });
                });
            }

            function renderUpcomingBill() {
                upcomingBillCard.innerHTML = `
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-2xl font-bold">ðŸ’¡ Upcoming Bill</h2>
                        <div class="admin-controls">
                             <button id="edit-bill-btn" class="bg-blue-500 text-white text-sm font-semibold py-1 px-3 rounded-lg hover:bg-blue-600">Edit</button>
                        </div>
                    </div>
                    <div class="space-y-2 text-gray-700">
                        <p><span class="font-semibold text-gray-900">Type:</span> ${upcomingBill.type}</p>
                        <p><span class="font-semibold text-gray-900">Total:</span> $${upcomingBill.total}</p>
                        <p><span class="font-semibold text-gray-900">Your Share:</span> $${upcomingBill.share}</p>
                        <p><span class="font-semibold text-gray-900">Due By:</span> ${upcomingBill.due}</p>
                    </div>
                `;
                document.getElementById('edit-bill-btn').addEventListener('click', editUpcomingBill);
            }

            function renderChores() {
                let choreGrid = chores.map(person => {
                    const choreSelectOptions = choreOptions.map(opt => `<option value="${opt}" ${person.task === opt ? 'selected' : ''}>${opt}</option>`).join('');
                    
                    return `
                        <div class="chore-cell p-3 border border-gray-200 rounded-lg" data-person-name="${person.name}">
                             <div class="chore-display">
                                <h3 class="font-semibold text-gray-900">${person.name}:</h3>
                                <p>${person.task}</p>
                                <p class="text-xs text-gray-500">Due: ${person.dueDate}</p>
                                <div class="admin-controls mt-2">
                                     <button class="edit-chore-btn bg-blue-500 text-white text-xs font-semibold py-1 px-2 rounded-lg hover:bg-blue-600">Edit</button>
                                </div>
                            </div>
                            <div class="chore-edit-form hidden">
                                <h3 class="font-semibold text-gray-900">${person.name}:</h3>
                                <select class="chore-task-select w-full p-1 border rounded mt-1">${choreSelectOptions}</select>
                                <input type="text" class="chore-date-input w-full p-1 border rounded mt-1" value="${person.dueDate}">
                                <div class="admin-controls mt-2">
                                    <button class="save-chore-btn bg-green-500 text-white text-xs font-semibold py-1 px-2 rounded-lg hover:bg-green-600">Save</button>
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');

                choresCard.innerHTML = `
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-2xl font-bold">ðŸ§¹ Weekly Chores</h2>
                        <div class="admin-controls">
                            <button id="suggest-chores-btn" class="bg-purple-500 text-white text-sm font-semibold py-1 px-3 rounded-lg hover:bg-purple-600">ðŸŽ² Suggest Rotation</button>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4 text-gray-700">${choreGrid}</div>
                `;
                 document.getElementById('suggest-chores-btn').addEventListener('click', suggestChoreRotation);
            }

            choresCard.addEventListener('click', function(e) {
                const choreCell = e.target.closest('.chore-cell');
                if (!choreCell) return;

                const personName = choreCell.dataset.personName;
                const displayEl = choreCell.querySelector('.chore-display');
                const formEl = choreCell.querySelector('.chore-edit-form');

                if (e.target.matches('.edit-chore-btn')) {
                    displayEl.classList.add('hidden');
                    formEl.classList.remove('hidden');
                }

                if (e.target.matches('.save-chore-btn')) {
                    const newChore = formEl.querySelector('.chore-task-select').value;
                    const newDate = formEl.querySelector('.chore-date-input').value;
                    
                    const personIndex = chores.findIndex(p => p.name === personName);
                    if (personIndex > -1) {
                        chores[personIndex].task = newChore;
                        chores[personIndex].dueDate = newDate;
                        saveData();
                        renderChores();
                    }
                }
            });

            function renderChart() {
                const chartLabels = ['Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec', 'Jan'];
                const monthlyTotals = [];
                const backgroundColors = [];

                chartLabels.forEach(label => {
                    const monthName = Object.keys(initialPayments.reduce((acc,p) => ({...acc, [p.month.split(' ')[0]]:1}),{})).find(m => m.startsWith(label));
                    const relevantPayments = payments.filter(p => p.month.includes(monthName));
                    
                    const totalRentForMonth = relevantPayments.reduce((sum, p) => sum + p.amount, 0);
                    monthlyTotals.push(totalRentForMonth);

                    const allPaid = relevantPayments.every(p => p.status === 'paid');
                    backgroundColors.push(allPaid ? '#06D6A0' : '#FF6B6B');
                });

                const data = {
                    labels: chartLabels,
                    datasets: [{
                        label: 'Total Monthly Rent',
                        data: monthlyTotals,
                        backgroundColor: backgroundColors,
                    }]
                };

                if (monthlyRentChart) {
                    monthlyRentChart.data = data;
                    monthlyRentChart.options.plugins.legend.display = false;
                    monthlyRentChart.options.scales.x.stacked = false;
                    monthlyRentChart.options.scales.y.stacked = false;
                    monthlyRentChart.update();
                } else {
                    const ctx = document.getElementById('monthlyRentChart').getContext('2d');
                    monthlyRentChart = new Chart(ctx, {
                        type: 'bar',
                        data: data,
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    ticks: {
                                        callback: function(value) { return '$' + value; }
                                    }
                                }
                            },
                            plugins: {
                                legend: { 
                                    display: false 
                                },
                                tooltip: {
                                    callbacks: {
                                        title: function(tooltipItems) {
                                            return tooltipItems[0].label;
                                        }
                                    }
                                }
                            }
                        }
                    });
                }
            }

            function render() {
                renderKPIs();
                renderTimeline();
                renderNotifications();
                renderUpcomingBill();
                renderChores();
                renderChart();
            }

            adminBtn.addEventListener('click', () => {
                if (document.body.classList.contains('admin-mode')) {
                    document.body.classList.remove('admin-mode');
                    adminBtn.textContent = 'Enter Admin Mode';
                    adminBtn.classList.remove('bg-red-500', 'hover:bg-red-600');
                    adminBtn.classList.add('bg-[#073B4C]', 'hover:bg-[#118AB2]');
                } else {
                    const password = prompt('Enter Admin Password:');
                    if (password === correctPassword) {
                        document.body.classList.add('admin-mode');
                        adminBtn.textContent = 'Exit Admin Mode';
                        adminBtn.classList.remove('bg-[#073B4C]', 'hover:bg-[#118AB2]');
                        adminBtn.classList.add('bg-red-500', 'hover:bg-red-600');
                    } else if (password !== null) {
                        alert('Incorrect Password.');
                    }
                }
            });
            
            addNotificationBtn.addEventListener('click', addNotification);
            closeSuggestionBtn.addEventListener('click', () => suggestionModal.classList.add('hidden'));
            applySuggestionBtn.addEventListener('click', applySuggestion);


            loadData();
            render();
        });
    </script>

</body>
</html>
